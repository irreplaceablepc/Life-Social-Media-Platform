<header id="header">
    <div>
            <img src="/img/logo1.png" alt="life logo" height="6%" width="6%" style="margin-right: 10px;">
            <h1 style="padding-top: 2%;">Life</h1>
            <input id="h-search-bar" type="search" class="h-form-control" placeholder="Search" aria-label="Search" autocomplete="on">
            <div id="search-results"></div>

            <% if(locals.user) {%>
            <button type="button" class="h-button" data-toggle="modal" data-target="#post-modal" id="post-modal-trigger" onclick="togglePage('page1')">+ Create Post</button>
            <%} %>
    </div>
</header>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $('#h-search-bar').on('input', async (event) => {
const query = event.target.value.trim();

try {
    const users = await $.get(`/users/search?query=${query}`);
    

    // Display search results
    $('#search-results').empty();
    users.forEach(user => {
        $('#search-results').append(`<div style="display: flex; background-color: #cccc"><img src="${user.avatar}" onerror="this.onerror=null; this.src='/img/avatar.png'"/><a href="/users/profile/${user._id}"><h3>${user.name}</h3></a></div>`);
    });

    // Show search results div
    $('#search-results').addClass('show');
} catch (error) {
    console.error(error);
}
});


</script>


<script src="/js/others.js"></script>